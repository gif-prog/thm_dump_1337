let apexChart;const apexChartAnimations={'enabled':!![]},showUserAmount=0x32,chartEl=document['querySelector']('#chart-data');async function updateScoreboard(_0x47b27d){const _0x4956a5=_0x47b27d,_0x4c93d0=0x2,_0x1707b4=document['querySelector']('#scoreboard_header');if(_0x4956a5['length']>0x0&&Object['keys'](_0x4956a5[0x0]['tasks'])['length']>0x0&&_0x1707b4){_0x1707b4['innerHTML']='<th\x20class=\x22rotated\x22\x20colspan=\x22'+_0x4c93d0+'\x22><div\x20class=\x22rotated-left-edge\x22></div></th>';const _0x57fafc=_0x47b27d[0x0];for(const _0x190fc of Object['keys'](_0x57fafc['tasks'])){for(const _0x356705 of _0x57fafc['tasks'][_0x190fc]){_0x1707b4['innerHTML']+='<th\x20class=\x22rotated\x22><div\x20class=\x22category-header-0\x22><span>[Task\x20'+_0x190fc+']\x20#'+_0x356705['questionNo']+'</span></div></th>';}}_0x1707b4['innerHTML']+='<th\x20class=\x22rotated\x22><div\x20class=\x22rotated-right-edge\x22></div></th>';}const _0x3ddbd8=document['querySelector']('#scoreboard_body');_0x3ddbd8&&(_0x3ddbd8['innerHTML']='',_0x4956a5['forEach'](async function(_0x223899,_0x468772){const _0x395b0d=_0x223899['rankNo']?_0x223899['rankNo']:_0x468772+0x1;let _0x4eb898='<tr\x20class=\x22scoreboard_row\x22>';_0x4eb898='<td\x20class=\x22scoreboard_rank\x22>'+_0x395b0d+'</td>',_0x4eb898+='<td\x20class=\x22scoreboard_name\x22\x20style=\x27line-height:0;\x27>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x27d-inline-block\x27>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22media\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<img\x20class=\x22user-square-img-med\x20mr-2\x22\x20src=\x22'+_0x223899['avatar']+'\x22/>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22media-body\x20text-left\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<h5\x20class=\x22mb-2\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<a\x20class=\x22nocss\x22\x20href=\x22/p/'+_0x223899['username']+'\x22>'+_0x223899['username']+'</a>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</h5>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p\x20class=\x27m-0\x20size-12\x27><span\x20class=\x22level-simple-design\x20level\x20level-'+_0x223899['level']+'\x22></p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>';for(const _0x120828 of Object['keys'](_0x223899['tasks'])){for(const _0x58c205 of _0x223899['tasks'][_0x120828]){let _0xf5b74='<i\x20class=\x22fas\x20fa-check-circle\x20scoreboard-points\x22\x20data-toggle=\x22tooltip\x22\x20data-placement=\x22top\x22\x20title=\x22'+_0x58c205['score']+'\x20points\x22></i>';!_0x58c205['correct']&&(_0xf5b74='<i\x20class=\x22fas\x20fa-check-circle\x22\x20style=\x22opacity:\x200.2;\x22></i>'),_0x4eb898+='<td\x20class=\x22scoreboard_check\x22>'+_0xf5b74+'</td>';}}_0x4eb898+='<td\x20class=\x22scoreboard_score\x22>'+_0x223899['score']+'</td>',_0x4eb898+='</tr>',_0x3ddbd8['innerHTML']+=_0x4eb898,$('.scoreboard-points')['tooltip']();}));}function showChart(_0x560a25){$['getJSON']('/api/room/scoreboard?code='+_0x560a25+'&limit=10',async function(_0x369155){populateChart(_0x369155);});}function populateChart(_0x2fe179){if(_0x2fe179['length']>0x0){updateScoreboard(_0x2fe179);const _0xb089ee=formatChartData(_0x2fe179);renderLineChart(_0xb089ee);}else{const _0x29dd52=document['querySelector']('#scoreboard');_0x29dd52&&(_0x29dd52['innerHTML']='</br><div\x20class=\x22alert\x20alert-info\x22\x20id=\x22ctf-scoreboard\x22\x20role=\x22alert\x22>There\x20are\x20no\x20scores\x20to\x20show\x20yet.</div>',chartEl['innerHTML']='<div\x20class=\x22alert\x20alert-info\x22\x20id=\x22ctf-chart\x22\x20role=\x22alert\x22>No\x20chart\x20data\x20to\x20display.</div>',chartEl['style']['height']='auto');}}function formatChartData(_0x100b3d){let _0x3b48ca=[];const _0x11e587=[];for(const _0x28de61 of _0x100b3d){_0x11e587['push']({'username':_0x28de61['username'],'currentPoints':0x0,'data':[]});for(const _0x33171f of Object['keys'](_0x28de61['tasks'])){for(const _0x3de214 of _0x28de61['tasks'][_0x33171f]){_0x3b48ca['push']({'username':_0x28de61['username'],'points':_0x3de214['score'],'awarded':_0x3de214['timeCorrect']});}}}_0x3b48ca=_0x3b48ca=_['sortBy'](_0x3b48ca,'awarded');const _0x1e9ed1=[];for(const _0x1cbef1 of _0x3b48ca){if(_0x1cbef1['awarded']!=0x0){for(const _0x388590 of _0x11e587){_0x388590['username']==_0x1cbef1['username']?(_0x388590['currentPoints']+=_0x1cbef1['points'],_0x388590['data']['push'](_0x388590['currentPoints'])):_0x388590['data']['push'](_0x388590['currentPoints']);}_0x1e9ed1['push'](_0x1cbef1['awarded']);}}return{'series':_0x11e587,'labels':_0x1e9ed1};}function renderLineChart(_0x185b40){if(apexChart)apexChart['destroy']();const _0xe1ee96=_0x185b40['labels'],_0x18fe01=[];for(const _0x44c88e of _0xe1ee96){const _0x2e7764=_0x44c88e?prettifyDate3(_0x44c88e):'-';_0x18fe01['push'](_0x2e7764);}const _0xd3bfdc=_0x185b40['series'],_0x5c04b2=[];for(const _0x5eb051 of _0xd3bfdc){_0x5c04b2['push']({'name':_0x5eb051['username'],'type':'line','data':_0x5eb051['data']});}var _0x27cfcb={'series':_0x5c04b2,'chart':{'animations':apexChartAnimations,'zoom':{'enabled':![]},'height':0x15e,'type':'line','toolbar':{'show':![]}},'stroke':{'curve':'smooth'},'fill':{'type':'solid','opacity':[0.35,0x1]},'labels':_0x18fe01,'markers':{'size':0x0},'xaxis':{'tooltip':{'enabled':![]},'labels':{'show':![]}},'selection':{'enabled':![]},'tooltip':{'shared':!![],'intersect':![],'y':{'formatter':function(_0x2e70ce){if(typeof _0x2e70ce!=='undefined')return _0x2e70ce['toFixed'](0x0)+'\x20points';return _0x2e70ce;}},'x':{'format':'dd\x20MMM'}}};apexChart=new ApexCharts(chartEl,_0x27cfcb),apexChart['render'](),apexChartAnimations['enabled']=![];}